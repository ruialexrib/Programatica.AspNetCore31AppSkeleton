
<script type="text/javascript">

    var users = users || {};

    users.record_id         = null;
    users.record_name       = null;
    users.record_systemid   = null;
    users.get_grid          = () => $("#GridUsers")[0].ej2_instances[0];

    users.on_grid_databound = (args) => { };

    users.on_grid_click = (args) => {
        users.record_id = args.data.Id;
        users.record_name = args.data.Username;
        users.record_systemid = args.data.SystemId;
    };

    users.on_grid_dblclick = (args) => {
        users.record_id = args.rowData.Id;
        users.show_update_view(users.record_id);
    };

    users.show_update_view = (id) => {
        if (id) {
            var url = "@Url.Action("Edit", "Users")?id=" + id;
            modal.show(url, modalsizes.NORMAL)
                .then((h) => {
                })
                .catch((e) => {
                    global.toasterror(e);
                });
        }
        else {
            global.alert("You must select a record !");
        }
    };

    users.show_create_view = () => {
        var url = "@Url.Action("Create", "Users")";
        modal.show(url, modalsizes.NORMAL)
            .then((h) => {
            })
            .catch((e) => {
                global.toasterror(e);
            });
    }

    users.clear_filters = () => {
        var grid = users.get_grid();
        grid.clearFiltering();
    };

    users.clear_search = () => {
        var grid = users.get_grid();
        grid.searchSettings.key = '';
    };

    users.show_groups = () => {
        var grid = users.get_grid();
        grid.allowGrouping = !grid.allowGrouping;
    };

    users.search = (searchString) => {
        var grid = users.get_grid();
        grid.search(searchString);
    };

    users.delete = (id) => {
        if (id) {
            global.confirm(cfg.text.askConfirmDelete + `<br><b>'${users.record_name}'</b>`)
                .then((result) => {
                    if (result === true) {
                        var url = "@Url.Action("Delete", "Users")";
                        var data = { Id: id };
                        global.submit(url, data)
                            .then((status) => {
                                users.refresh();
                                global.toastsuccess("Record deleted with success!");
                            })
                            .catch((status) => {
                                var s = JSON.parse(status);
                                global.toasterror(s.message);
                            });
                    }
                });
        }
        else {
            global.alert("You must select a record !");
        }
    };

    users.refresh = () => {
        var grid = users.get_grid();
        grid.refresh();
    };

    users.resize = () => {
        var grid = users.get_grid();
        grid.height = $(window).height() - 300;
    };

   
</script>